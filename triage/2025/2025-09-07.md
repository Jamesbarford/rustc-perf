# 2025-09-07 Triage Log

Overall, a fairly neutral week with relatively few changes affecting
performance landing.

Triage done by **@simulacrum**.
Revision range: [75ee9ffd..f13ef0d7](https://perf.rust-lang.org/?start=75ee9ffd5ed3649c0a09493057adaa8feebb2035&end=f13ef0d75d834c826c9479a5d244bcfb9891df45&absolute=false&stat=instructions%3Au)

**Summary**:

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.5%  | [0.1%, 1.6%]   | 54    |
| Regressions ❌ <br /> (secondary)  | 0.2%  | [0.0%, 0.5%]   | 54    |
| Improvements ✅ <br /> (primary)   | -0.7% | [-5.6%, -0.1%] | 18    |
| Improvements ✅ <br /> (secondary) | -1.5% | [-5.7%, -0.0%] | 43    |
| All ❌✅ (primary)                 | 0.2%  | [-5.6%, 1.6%]  | 72    |

1 Regression, 5 Improvements, 3 Mixed; 4 of them in rollups
33 artifact comparisons made in total

#### Regressions

Rollup of 5 pull requests [#146224](https://github.com/rust-lang/rust/pull/146224) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=ad85bc524b1ad696e42061ad8338d382dffbdbe5&end=c559c4a741836c4ffa8e4f60cb9fe7e92af5298e&stat=instructions:u)

| (instructions:u)                   | mean | range        | count |
|:----------------------------------:|:----:|:------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.1% | [0.1%, 0.1%] | 2     |
| Regressions ❌ <br /> (secondary)  | 0.2% | [0.0%, 0.3%] | 8     |
| Improvements ✅ <br /> (primary)   | -    | -            | 0     |
| Improvements ✅ <br /> (secondary) | -    | -            | 0     |
| All ❌✅ (primary)                 | 0.1% | [0.1%, 0.1%] | 2     |

Doc-only effects, likely from changes to std/core. Not worth digging deeper.

#### Improvements

cleanup and cache proof tree building [#145951](https://github.com/rust-lang/rust/pull/145951) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=f6df223ea8c0017e64ce19c99afa32c0c629142c&end=a2c8b0b92c14b02f0b3f96a0d5296f1090dc286b&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | -     | -              | 0     |
| Regressions ❌ <br /> (secondary)  | 0.0%  | [0.0%, 0.0%]   | 1     |
| Improvements ✅ <br /> (primary)   | -     | -              | 0     |
| Improvements ✅ <br /> (secondary) | -3.0% | [-5.7%, -0.1%] | 15    |
| All ❌✅ (primary)                 | -     | -              | 0     |


rustdoc-search: yet another stringdex optimization attempt [#145911](https://github.com/rust-lang/rust/pull/145911) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=0d6a806909f8e99ad59d3ca96dee012faf9a38e9&end=af00ff2ce62b6617ed19305ae39e135ac71d0b22&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | -     | -              | 0     |
| Regressions ❌ <br /> (secondary)  | -     | -              | 0     |
| Improvements ✅ <br /> (primary)   | -0.8% | [-6.0%, -0.1%] | 11    |
| Improvements ✅ <br /> (secondary) | -1.0% | [-2.4%, -0.2%] | 3     |
| All ❌✅ (primary)                 | -0.8% | [-6.0%, -0.1%] | 11    |


resolve: Avoid finalizing extern prelude entries more than once [#144737](https://github.com/rust-lang/rust/pull/144737) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=91edc3ebccc4daa46c20a93f4709862376da1fdd&end=ad85bc524b1ad696e42061ad8338d382dffbdbe5&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | -     | -              | 0     |
| Regressions ❌ <br /> (secondary)  | -     | -              | 0     |
| Improvements ✅ <br /> (primary)   | -0.1% | [-0.1%, -0.1%] | 6     |
| Improvements ✅ <br /> (secondary) | -1.1% | [-2.0%, -0.4%] | 8     |
| All ❌✅ (primary)                 | -0.1% | [-0.1%, -0.1%] | 6     |


Rollup of 5 pull requests [#146267](https://github.com/rust-lang/rust/pull/146267) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=0d0f4eac8b98133e5da6d3604d86a8f3b5a67844&end=6d5caf3a4a358c80f09ba51d71db0dbc41381992&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | -     | -              | 0     |
| Regressions ❌ <br /> (secondary)  | -     | -              | 0     |
| Improvements ✅ <br /> (primary)   | -0.1% | [-0.2%, -0.1%] | 2     |
| Improvements ✅ <br /> (secondary) | -0.3% | [-0.7%, -0.1%] | 15    |
| All ❌✅ (primary)                 | -0.1% | [-0.2%, -0.1%] | 2     |


Make the allocator shim participate in LTO again [#146232](https://github.com/rust-lang/rust/pull/146232) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=6d5caf3a4a358c80f09ba51d71db0dbc41381992&end=bea625f3275e3c897dc965ed97a1d19ef7831f01&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | -     | -              | 0     |
| Regressions ❌ <br /> (secondary)  | 0.1%  | [0.1%, 0.2%]   | 2     |
| Improvements ✅ <br /> (primary)   | -0.9% | [-1.9%, -0.3%] | 221   |
| Improvements ✅ <br /> (secondary) | -0.9% | [-2.2%, -0.0%] | 260   |
| All ❌✅ (primary)                 | -0.9% | [-1.9%, -0.3%] | 221   |


#### Mixed

Rollup of 24 pull requests [#146185](https://github.com/rust-lang/rust/pull/146185) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=9385c64c95d971329e62917adc4349c8ccdbafe0&end=033c0a4742794f5608b19eb78458726596f8ec18&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.6%  | [0.1%, 1.6%]   | 39    |
| Regressions ❌ <br /> (secondary)  | 0.2%  | [0.0%, 0.6%]   | 27    |
| Improvements ✅ <br /> (primary)   | -0.5% | [-0.9%, -0.2%] | 12    |
| Improvements ✅ <br /> (secondary) | -0.3% | [-0.5%, -0.1%] | 9     |
| All ❌✅ (primary)                 | 0.3%  | [-0.9%, 1.6%]  | 51    |

Regressions mostly from:

- [On unused binding or binding not present in all patterns, suggest potential typo of unit struct/variant or const](https://github.com/rust-lang/rust/pull/145827)
- [Allow inline(always) with a target feature behind a unstable feature `target_feature_inline_always`.](https://github.com/rust-lang/rust/pull/145932)

Doesn't seem worth digging deeper - these are features or diagnostic
improvements and the regressions aren't too large or two widespread.

Rollup of 5 pull requests [#146192](https://github.com/rust-lang/rust/pull/146192) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=79bdc627562db90599edcf16cb166a532919a0a8&end=45b9d13b455f820c12760e0fbf6ce69110a3aeda&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.1%  | [0.1%, 0.1%]   | 1     |
| Regressions ❌ <br /> (secondary)  | 0.3%  | [0.1%, 0.4%]   | 2     |
| Improvements ✅ <br /> (primary)   | -     | -              | 0     |
| Improvements ✅ <br /> (secondary) | -0.2% | [-0.5%, -0.1%] | 7     |
| All ❌✅ (primary)                 | 0.1%  | [0.1%, 0.1%]   | 1     |

Regressions largely recovered in subsequent commits (though not in related PRs,
so possibly spurious in the first place) and don't seem worth further followup.

Rework how the codegen coordinator code handles the allocator shim [#145955](https://github.com/rust-lang/rust/pull/145955) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=45b9d13b455f820c12760e0fbf6ce69110a3aeda&end=71289c378d0a406a4f537fe4001282d19362931f&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.9%  | [0.3%, 2.0%]   | 229   |
| Regressions ❌ <br /> (secondary)  | 0.9%  | [0.0%, 2.2%]   | 259   |
| Improvements ✅ <br /> (primary)   | -     | -              | 0     |
| Improvements ✅ <br /> (secondary) | -0.2% | [-0.3%, -0.0%] | 4     |
| All ❌✅ (primary)                 | 0.9%  | [0.3%, 2.0%]   | 229   |

The regressions here are clawed back in [Make the allocator shim participate in LTO again](https://github.com/rust-lang/rust/pull/146232).
